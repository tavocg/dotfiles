#!/bin/sh
# Script for using either bemenu or dmenu
# with preconfigured options

# Configuration
MENU="dmenu"
col_main="#83a598"
col_second="#121212"
font_bemenu="JetbrainsMono"
font_dmenu="JetbrainsMono:size=10"

# Case 'pass' argument is given format accordingly
PROMPT="$1" ; MODE="$2"
[ "$MODE" = "pass" ] &&
    BPASS="-x" && DPASS="-P"

if [ "$PROMPT" = "" -o "$PROMPT" = "-h" ] ; then
    printf "Usage: menu [prompt] [run/pass/empty]"
    return 0
fi

# bemenu opts
BEMENU_OPTS=" \
    -c \
    -i \
    -l 10 \
    -M 5 \
    -W 0.3 \
    -B 2 \
    --cw 2 \
    --tb $col_main \
    --tf $col_second \
    --nb $col_second \
    --nf $col_main \
    --hb $col_main \
    --hf $col_second \
    --ab $col_second \
    --af $col_main \
    --bdr $col_main \
    --fn "$font_bemenu" \
    -p "$PROMPT" \
    $BPASS \
"

# dmenu opts
DMENU_OPTS=" \
    -c \
    -i \
    -l 10 \
    -nb $col_second \
    -nf $col_main \
    -sb $col_main \
    -sf $col_second \
    -fn "$font_dmenu" \
    -p "$PROMPT" \
    $DPASS \
"

# If chosen bemenu, use this args
[ "$MENU" = "bemenu" ] &&
    OPTS="$BEMENU_OPTS" &&
    RUN="-run"

# If chosen dmenu, use this args
[ "$MENU" = "dmenu" ] &&
    OPTS="$DMENU_OPTS" &&
    RUN="_run"

[ "$MODE" = "run" ]   && $MENU$RUN $OPTS
[ "$MODE" = "pass" ]  && < /dev/null | $MENU $OPTS
[ "$MODE" = "empty" ] && < /dev/null | $MENU $OPTS
[ -z "$MODE" ]        && $MENU $OPTS
